<h1>Steganography</h1>
<h2>Original Images Cropped to Same Size</h2>
<table>
  <tr>
    <th>Image</th><th>Image to Hide</th>
  </tr>
  <tr>
    <td><a href="http://s19.postimg.org/y43t7snjn/Cat_Original_Cropped.png"><img src="http://s19.postimg.org/y43t7snjn/Cat_Original_Cropped.png" title="http://s19.postimg.org/y43t7snjn/Cat_Original_Cropped.png" /></a></td>
    <td><a href="http://s19.postimg.org/nrhilpu0j/Original_Text_Cropped.png"><img src="http://s19.postimg.org/nrhilpu0j/Original_Text_Cropped.png" title="http://s19.postimg.org/nrhilpu0j/Original_Text_Cropped.png" /></a></td>
  </tr>
</table>
<h2>Image with Hidden Value Hiding in Lower 2 Bits</h2>
<table>
  <tr><th>Image with Hidden Image</th><th>Hidden Image Extracted</th></tr><tr><td><a href="http://s19.postimg.org/6s8k6gisz/Cat_With_Text_Hidden.png"><img src="http://s19.postimg.org/6s8k6gisz/Cat_With_Text_Hidden.png" title="http://s19.postimg.org/6s8k6gisz/Cat_With_Text_Hidden.png" /></a></td><td><a href="http://s19.postimg.org/6oa5cgnxv/Text_Extracted_From_Cat.png"><img src="http://s19.postimg.org/6oa5cgnxv/Text_Extracted_From_Cat.png" title="http://s19.postimg.org/6oa5cgnxv/Text_Extracted_From_Cat.png" /></a></td></tr>
</table>
<h2>Algorithm</h2>
<p>
  To hide an image in 2 bits the number 4 (2^2 = 4) is the factor that must be used. For the other 6 bits we use 64 as the factor (2^6 = 64). The rest of the  program continues the same.</p>
<pre>

//Function to crop the image
function crop(image, width, height){
   var croppedImage = new SimpleImage(width,height)
   for (var pixel of image.values() ){
      var x = pixel.getX();
      var y = pixel.getY();
      if ((x &lt width) && (y &lt height)){
         var croppedImagePx = croppedImage.getPixel(x,y);
         croppedImagePx.setRed(pixel.getRed());
         croppedImagePx.setGreen(pixel.getGreen());
         croppedImagePx.setBlue(pixel.getBlue());
      }
   }    
   return croppedImage; 
}

function pixchange(pixval){
   var x = Math.floor(pixval/4) * 4;
   return x;
}

function chop2hide(image){
   for (var px of image.values()){
      px.setRed(pixchange(px.getRed()));
      px.setGreen(pixchange(px.getGreen()));
      px.setBlue(pixchange(px.getBlue()));
   }
   return image;
}

function shift(im){
   var nim = new SimpleImage(im.getWidth(), im.getHeight());
   for (var px of im.values()){
      var x = px.getX();
      var y = px.getY();
      var npx = nim.getPixel(x,y);
      npx.setRed(Math.floor(px.getRed()/64));
      npx.setGreen(Math.floor(px.getGreen()/64));
      npx.setBlue(Math.floor(px.getBlue()/64));
   }
   return nim;
}

function newpv(p, q){
   if(p+q &lt= 255) return p+q;
   print("Error: the sum cannot be greater than 255.");
}

function combine(image1, image2){
    var combined = new SimpleImage(image1.getWidth(), image1.getHeight());
    for(var pximage1 of image1.values()){ 
        var x = pximage1.getX();
        var y = pximage1.getY();
        var pximage2 = image2.getPixel(x,y); 
        var npx = combined.getPixel(x,y);
        npx.setRed(newpv(pximage1.getRed(),pximage2.getRed()));
        npx.setGreen(newpv(pximage1.getGreen(),pximage2.getGreen()));
        npx.setBlue(newpv(pximage1.getBlue(),pximage2.getBlue()));
    }
    return combined;
}


function extract(stego) {
    var hidden = new SimpleImage(stego.getWidth(), stego.getHeight()); 
    for (var px of stego.values()){
        var x = px.getX();
        var y = px.getY();
        var newpx = hidden.getPixel(x,y);
        newpx.setRed((px.getRed() - (Math.floor(px.getRed()/4) * 4)) *64);
        newpx.setGreen((px.getGreen() - (Math.floor(px.getGreen()/4) * 4)) *64);  
        newpx.setBlue((px.getBlue() - (Math.floor(px.getBlue()/4) * 4)) *64); 
    }
return hidden;
}

function smallestWidth(start, hide){
    if (start.getWidth() &lt hide.getWidth()){
        return start.getWidth();
    } else {
        return hide.getWidth();
    }
}

function smallestHeight(start, hide){
    if (start.getHeight() &lt hide.getHeight()){
        return start.getHeight();
    } else {
        return hide.getHeight();
    }
}

var enter1StImg = prompt("Enter the first image full name: ", "usain.jpg");
var enter2NdImg = prompt("Enter the first image full name: ", "hilton.jpg");

var start = new SimpleImage(enter1StImg);
var hide = new SimpleImage(enter2NdImg);

var startcropped = crop(start, smallestWidth(start, hide),smallestHeight(start, hide));
var hidecropped = crop(hide, smallestWidth(start, hide),smallestHeight(start, hide));


print("The orginal start first image ");
print(start.getWidth(), start.getHeight());
print(start);

print("The orginal start first image cropped ");
print(startcropped.getWidth(), startcropped.getHeight());
print(startcropped);

print("The original hide second image ");
print(hide);
print(hide.getWidth(), hide.getHeight());

print("The original hide second image cropped ");
print(hidecropped);
print(hidecropped.getWidth(), hidecropped.getHeight());

print("Chop2hide in first cropped image ");
print(chop2hide(startcropped));

print("Hidecropped in second cropped image ");
print(shift(hidecropped));

var stegoImg = combine(chop2hide(startcropped), shift(hidecropped));

print("The final stego image ");
print(stegoImg);


print("The extracted image: ");
print(extract(stegoImg));
</pre>
<h2>Drew's Picture Hidden Picture Text </h2>
<p>Program testing can be used to show the presence of bugs, but never to show their absence!
E. Dijkstra
</p>
